<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>فاحص عبارات Mnemonic</title>
  <!-- استدعاء مكتبة bip39 بصيغة browser -->
  <script src="https://cdn.jsdelivr.net/npm/bip39@3.0.4/browser/index.min.js"></script>
  <style>
    body { font-family: sans-serif; padding: 1rem; }
    textarea { width: 100%; height: 200px; }
    #output { white-space: pre-wrap; background: #f0f0f0; padding: .5rem; }
    button { padding: .5rem 1rem; font-size: 1rem; }
  </style>
</head>
<body>
  <h2>فاحص عبارات Mnemonic</h2>
  <p>الصق عباراتك (12 كلمة) سطرًا بسطر:</p>
  <textarea id="input" placeholder="مثال: abandon ability able ..."></textarea>
  <p>
    <button onclick="scanPhrases()">فحص العبارات</button>
    <input type="file" id="fileInput" accept=".txt" onchange="loadFile(event)">
  </p>
  <h3>العبارات الصحيحة:</h3>
  <div id="output"></div>

  <script>
  function loadFile(evt) {
    const file = evt.target.files[0];
    if (!file) return;
    const reader = new FileReader();
    reader.onload = e => {
      document.getElementById('input').value = e.target.result;
    };
    reader.readAsText(file, 'UTF-8');
  }

  function scanPhrases() {
    const text = document.getElementById('input').value.trim();
    const lines = text.split(/\r?\n/).map(l => l.trim()).filter(l => l);
    const valid = [];
    lines.forEach((phrase, idx) => {
      // تحقق من أن العبارة صحيحة BIP39
      if (bip39.validateMnemonic(phrase)) {
        valid.push(phrase);
      }
    });
    const out = document.getElementById('output');
    if (valid.length) {
      out.textContent = valid.join('\n');
    } else {
      out.textContent = 'لا توجد عبارات صحيحة.';
    }
  }
  </script>
</body>
</html>

